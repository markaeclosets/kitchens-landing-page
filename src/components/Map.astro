---
// Astro component script (empty for now)
---

<div class="absolute left-0 top-0">
  <div id="map"></div>
</div>

<style>
  #map {
    height: 700px;
    width: 100vw;
  }
</style>

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
  integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
  crossorigin=""
/>

<script
  is:inline
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
></script>

<script>
  // Declare L to avoid TypeScript errors
  declare const L: any;

  function initMap() {
    const toronto: [number, number] = [43.75, -79.447015];
    const map = L.map('map', {
      center: toronto,
      zoom: 15,
      zoomControl: false,
      touchZoom: false,
      scrollWheelZoom: false,
      doubleClickZoom: false,
      boxZoom: false,
      keyboard: false,
    });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 10,
    }).addTo(map);

    const mapContainer = map.getContainer();
    mapContainer.style.filter = 'grayscale(100%)';
    mapContainer.style.opacity = '0.2';
  }

  // Use 'load' event instead of 'DOMContentLoaded' for Astro
  window.addEventListener('load', initMap);
</script>